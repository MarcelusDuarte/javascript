<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Javascript</title>
    <style>
        #dv1{
            width: 100px;
            height: 100px;
            border: 1px solid #000;
            background-color: #fff;
        }
    </style>
    <script>

        var tmp;  //variavel global

        //Criar função para mudar cor da div de forma aleatoria
        function mudaCor(){
            var obj=document.getElementById("dv1");
            var r=Math.floor(Math.random()*255); // *255 gerar 256 numeros (0 a 255)
            var g=Math.floor(Math.random()*255); //Math.random para gerar numeros aleatorios
            var b=Math.floor(Math.random()*255); //Math.floor para gerar numeros inteiros(arrendondar os valores gerados)
            obj.style.backgroundColor="rgb("+r+","+g+","+b+")";
        }

        //window.addEventListener("load",mudaCor);

        //para que as mudanças sejam automaticas, precisam inserir uma função de controle de tempo
        //var tmp=setTimeout(mudaCor,3000); //cria variavel para melhorar o controle. Chama 1x a função apos o tempo configurado

        //var tmp=setInterval(mudaCor,1000); //chama a função a cada tempo especificado(loop)

        //criando as funções de controle de execução. Criada var tmp global para a mesma ser utilizada em todas as funções (escopo)
        function iniciar(){
            tmp=setInterval(mudaCor,1000);
        }

        function parar(){
            clearInterval(tmp);
        }

        //adicionando eventos aos botões
        function addEventos(){
            document.getElementById("bt1").addEventListener("click",iniciar);   //adiciona escutador no evento click que chama a função iniciar
        document.getElementById("bt2").addEventListener("click",parar);  //nesse momento os elementos dos botoes ainda nao foram renderizados. Vamos criar função para adicionar no load
        }
        window.addEventListener("load",addEventos); //carrega a função addEventos no load da pagina
        

    </script>
</head>
<body> <!-- pode usar "onload=mudaCor()" direto no body ou usar listener  -->
    <div id="dv1"></div>
    <br>
    <button id="bt1">Iniciar</button>
    <button id="bt2">Parar</button>
</body>
</html>